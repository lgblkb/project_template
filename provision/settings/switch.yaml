default:
  step_1:
    infra: { read_: infra.yaml }
    service: { read_: service.yaml }
    settings: { eval_: infra+service }
    docker:
      all: { read_: docker/all.yaml }
      infra: { read_: docker/infra.yaml }
      service: { read_: docker/service.yaml }
  #    docker_infra: { eval_: docker.all+docker.infra }
  #    docker_service: { eval_: docker.all+docker.service }
  step_2:
    docker:
      infra: { eval_: docker.all+docker.infra }
      service: { eval_: docker.all+docker.service }

#    docker_all: { read_: docker/all.yaml }
#    docker_infra: { read_: docker/infra.yaml }
#    docker_service: { read_: docker/service.yaml }

#    docker_all: docker/all.yaml
#  step_2:
#    docker_infra: docker/infra.yaml
#    docker_service: docker/service.yaml






#  docker_infra: { eval_: docker.all+docker.infra }
#  docker_service: { eval_: docker.all+docker.service }

#  settings: ${eval:"Box(infra)+service",'infra=${.infra}','service=${.service}'}

#  step_1:
#    targets:
#      infra: infra.yaml
#      service: service.yaml
#    merge:
#      settings: [ infra, service ]
#  step_2:
#    targets:
#      docker_all: docker/all.yaml
#      docker_infra: docker/infra.yaml
#      docker_service: docker/service.yaml
#    merge:
#      docker_infra: [ docker_all, docker_infra ]
#      docker_service: [ docker_all, docker_service ]


